<!-- Review Page -->
{{!-- <div id="reviewPage">
    <h2>{{businessName}}: {{review.rating}}</h2>
    <p>Posted by: {{username}}</p>
    <div id="reviewDescription">
        <p>{{review.reviewText}}</p>
        {{#if review.image}}
        <img src="{{review.image}}" alt="Review Image">
        {{/if}}
        {{#each commentData}}
        <li> {{this.commentDescription}}, Posted by: {{this.username}} --}}
            {{!-- {{#if (equals this.userId loggedInUserId)}}
            <form action="/comments/deleteComment" method="POST">
                <input type="hidden" name="commentId" value="{{this._id}}">
                <button type="submit">Delete</button>
            </form>
            {{/if}} --}}
            {{!-- {{#if canDelete}}
            <form action="/comments/deleteComment/{{this._id}}" method="POST">
                <input type="hidden" name="reviewId" value="{{this.reviewId}}">
                <button type="submit">Delete</button>
            </form>
            {{/if}}
        </li>

        {{else}}
        <p>No recent comments.</p>
        {{/each}}
    </div>
    <br>
    <form action="/comments/createComment" method="POST">
        <input type="hidden" name="reviewId" value="{{review._id}}" />
        <textarea name="commentDescription" placeholder="Add a comment..."></textarea>
        <button type="submit">Post Comment</button>
    </form>
</div> --}}


<!-- Review Page -->
{{!-- <div id="reviewPage" class="container mt-4">
    <h2 class="text-primary">{{businessName}}: {{review.rating}}</h2>
    <p class="font-italic">Posted by: {{username}}</p>
    <div id="reviewDescription" class="border rounded p-3 bg-light">
        <p>{{review.reviewText}}</p>
        {{#if review.image}}
        <img src="{{review.image}}" alt="Review Image" class="img-fluid">
        {{/if}}
        <ul class="list-unstyled mt-3">
            {{#each commentData}}
            <li class="border-bottom pb-2 mb-2">
                {{this.commentDescription}}, Posted by: {{this.username}}
                {{#if canDelete}}
                <form action="/comments/deleteComment/{{this._id}}" method="POST" class="d-inline-block ml-2">
                    <input type="hidden" name="reviewId" value="{{this.reviewId}}">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
                {{/if}}
            </li>
            {{else}}
            <p>No recent comments.</p>
            {{/each}}
        </ul>
    </div>
    <br>
    <form action="/comments/createComment" method="POST" class="mt-3">
        <input type="hidden" name="reviewId" value="{{review._id}}" />
        <div class="form-group">
            <textarea name="commentDescription" class="form-control" placeholder="Add a comment..." rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
</div> --}}

<div id="reviewPage" class="container mt-4">
    <h2 class="text-primary">{{businessName}}: {{review.rating}}</h2>
    <p class="font-italic">Posted by: {{username}}</p>

    <!-- Review Card -->
    <div class="card mb-3">
        <div class="card-body">
            <p>{{review.reviewText}}</p>
            {{#if review.image}}
            <img src="{{review.image}}" alt="Review Image" class="img-fluid">
            {{/if}}
        </div>
        <div class="card-footer">
            <!-- Like and Dislike Buttons -->
            <button onclick="updateLikeDislike('{{review._id}}', 'like')" class="btn btn-success btn-sm">Like</button>
            <span id="like-count-{{review._id}}">{{likes}}</span>

            <button onclick="updateLikeDislike('{{review._id}}', 'dislike')"
                class="btn btn-danger btn-sm">Dislike</button>
            <span id="dislike-count-{{review._id}}">{{dislikes}}</span>
        </div>
    </div>

    <!-- Comments Section -->
    <div class="comments-section">
        {{#each commentData}}
        <div class="card mb-2">
            <div class="card-body">
                <p class="card-text">{{this.commentDescription}}</p>
                <p class="text-muted">Posted by: {{this.username}}</p>
                {{#if canDelete}}
                <form action="/comments/deleteComment/{{this._id}}" method="POST" class="d-inline-block">
                    <input type="hidden" name="reviewId" value="{{this.reviewId}}">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
                {{/if}}
            </div>
        </div>
        {{else}}
        <p>No recent comments.</p>
        {{/each}}
    </div>

    <!-- Post Comment Form -->
    <form action="/comments/createComment" method="POST" class="mt-3">
        <input type="hidden" name="reviewId" value="{{review._id}}" />
        <div class="form-group">
            <textarea name="commentDescription" class="form-control" placeholder="Add a comment..." rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
</div>
<script src="/public/js/likeDislikeActions.js"></script>